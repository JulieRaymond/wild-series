{#
{% extends 'base.html.twig' %}

{% block title %}All programs{% endblock %}

{% block body %}
  <h1 class="series-title">Toutes les séries</h1>
  <a href="{{ path('program_new') }}">Ajoute une série</a>
  {% for program in programs %}
    <div class="card mb-3">
      <div class="card-body">
#}
{#        <img class="card-img" alt="image" src="{{ program.poster }}">#}{#

        <img class="card-img" alt="image" src="{{ vich_uploader_asset(program) }}">
        <h2 class="card-title">{{ loop.index }} - {{ program.title }} </h2>
        <h3 class="card-category"> Catégorie : {{ program.category.name }}</h3>
        <p class="card-text">{{ program.synopsis }}</p>
        <a href="{{ path("program_show", { slug: program.slug }) }}" class="btn btn-primary">Voir la fiche</a>
      </div>
    </div>
  {% else %}
    Aucune série trouvée.
  {% endfor %}

  <a href="{{ path('app_index') }}" class="btn btn-secondary">
    Retour à l'accueil
  </a>
{% endblock %}
#}
{% extends 'base.html.twig' %}

{% block title %}All programs{% endblock %}

{% block body %}
  <h1 class="series-title">Toutes les séries</h1>
  <a href="{{ path('program_new') }}" class="btn btn-success">Ajouter une série</a>
  {% for program in programs %}
    <div class="card mb-3">
      <div class="card-body">
        <img class="card-img" alt="image" src="{{ vich_uploader_asset(program) }}">
        <h2 class="card-title">{{ loop.index }} - {{ program.title }} </h2>
        <h3 class="card-category"> Catégorie : {{ program.category.name }}</h3>
        <p class="card-text">{{ program.synopsis }}</p>
        <a href="{{ path("program_show", { slug: program.slug }) }}" class="btn btn-primary">Voir la fiche</a>
        <a href="{{ path("program_app_program_edit", { slug: program.slug }) }}" class="btn btn-warning">Éditer</a>
        <a href="{{ path("program_app_program_delete", { slug: program.slug }) }}" class="btn btn-danger" onclick="event.preventDefault(); if (confirm('Etes vous sur de vouloir supprimer cette série dans sa totalité?')) { document.getElementById('delete-form-{{ program.slug }}').submit(); }">Supprimer</a>
        <form id="delete-form-{{ program.slug }}" action="{{ path("program_app_program_delete", { slug: program.slug }) }}" method="post" style="display: none;">
          <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ program.slug) }}">
        </form>
      </div>
    </div>
  {% else %}
    Aucune série trouvée.
  {% endfor %}

  <a href="{{ path('app_index') }}" class="btn btn-secondary">
    Retour à l'accueil
  </a>
{% endblock %}
